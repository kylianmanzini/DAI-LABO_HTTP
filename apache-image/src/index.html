<!DOCTYPE html>
<html lang="en">
<head>
    <title>Apache</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
        .w3-bar,h1,button {font-family: "Montserrat", sans-serif}
        .fa-anchor,.fa-coffee {font-size:200px}
    </style>
</head>
<body>

<!-- Header -->
<header class="w3-container w3-red w3-center" style="padding:128px 16px">
    <h1 class="w3-margin w3-jumbo">DAI</h1>
    <p class="w3-xlarge">Laboratoire Infrastructure HTTP</p>
    <button class="w3-button w3-black w3-padding-large w3-large w3-margin-top">Bouton qui fait des trucs</button>
</header>

<!-- First Grid -->
<div class="w3-row-padding w3-padding-64 w3-container">
    <div class="w3-content">
        <div class="w3-twothird" id="animal">
            <h1>Un animal du Zoo :</h1>
            <p id="espece"></p>
            <p id="nom"></p>
            <p id="genre"></p>
            <p id="naissance"></p>
            <p id="gardien"></p>
        </div>
    </div>
</div>

<script>
    const espece = document.getElementById('espece'),
        nom = document.getElementById('nom'),
        genre = document.getElementById('genre'),
        naissance = document.getElementById('naissance'),
        gardien = document.getElementById('gardien');

    async function populatePage() {
        const res = await resultAPI();
        console.log(res);

        espece.textContent=("Esp√®ce : " + res.species)
        nom.textContent=("Nom : " + res.name)
        genre.textContent=("Genre : " + res.gender)
        naissance.textContent=("Naissance : " + res.birthday)
        gardien.textContent=("Gardien : " + res.overseer)
    }

    async function resultAPI() {
        const response = await fetch("http://localhost/api")
        if (response.ok) {
            const jsonValue = await response.json();
            return Promise.resolve(jsonValue);
        } else {
            return Promise.reject("*** Error while fetching api");
        }
    }
    populatePage();
    window.setInterval(populatePage, 4000);

</script>

</body>
</html>
